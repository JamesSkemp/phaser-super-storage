/*!
 * phaser-super-storage - version 0.0.1 
 * A cross platform storage plugin for Phaser
 *
 * OrangeGames
 * Build at 22-07-2016
 * Released under MIT License 
 */

var StorageCommand=Fabrique.StorageCommand,StorageUtils=Fabrique.StorageUtils,LocalStorage=Fabrique.StorageAdapters.LocalStorage;!function(){var a=window.gameOrigin||"*";window.addEventListener("message",function(b){if("*"===a||b.origin===a){var c=(StorageUtils.isLocalStorageSupport(),StorageUtils.validateMessage(b.data));if(c)switch(c.command){case StorageCommand.init:}}})}();var Fabrique;!function(a){!function(a){a[a.init=0]="init",a[a.setItem=1]="setItem",a[a.getItem=2]="getItem",a[a.removeItem=3]="removeItem",a[a.clear=4]="clear",a[a.setNamespace=5]="setNamespace",a[a.length=6]="length",a[a.key=7]="key"}(a.StorageCommand||(a.StorageCommand={}));var b=(a.StorageCommand,function(){function a(){}return a.isLocalStorageSupport=function(){try{if("object"==typeof localStorage)return localStorage.setItem("testingLocalStorage","foo"),localStorage.removeItem("testingLocalStorage"),!0}catch(a){}return!1},a.validateMessage=function(a){return a.hasOwnProperty("command")?a:null},a.nameSpaceKeyFilter=function(a,b){return a.filter(function(a){return a.substring(0,b.length)===b})},a}());a.StorageUtils=b}(Fabrique||(Fabrique={}));var Fabrique;!function(a){var b;!function(b){var c=function(){function b(a){void 0===a&&(a=""),this.namespace="",this.setNamespace(a)}return Object.defineProperty(b.prototype,"length",{get:function(){var b=Object.keys(localStorage);return a.StorageUtils.nameSpaceKeyFilter(b,this.namespace).length},enumerable:!0,configurable:!0}),b.prototype.key=function(b){var c=Object.keys(localStorage),d=a.StorageUtils.nameSpaceKeyFilter(c,this.namespace);return localStorage.getItem(d[b])},b.prototype.getItem=function(a){return localStorage.getItem(this.namespace+a)},b.prototype.setItem=function(a,b){localStorage.setItem(this.namespace+a,b)},b.prototype.deleteItem=function(a){localStorage.removeItem(this.namespace+a)},b.prototype.empty=function(){for(var b=Object.keys(localStorage),c=a.StorageUtils.nameSpaceKeyFilter(b,this.namespace),d=0;d<c.length;d++)localStorage.removeItem(c[d])},b.prototype.setNamespace=function(a){a&&(this.namespace=a+":")},b}();b.LocalStorage=c}(b=a.StorageAdapters||(a.StorageAdapters={}))}(Fabrique||(Fabrique={}));